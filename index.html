<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mahmoud Yousry | Elite Design Tracker</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700;900&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Cairo', sans-serif; }
        .tab-active { background: white; color: #2563eb; shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1); }
        .animate-pulse-slow { animation: pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: .7; } }
    </style>
</head>
<body class="bg-slate-50 text-slate-900 min-h-screen">

    <!-- Header -->
    <header class="bg-white border-b border-slate-200 p-6 sticky top-0 z-50 shadow-sm">
        <div class="max-w-7xl mx-auto flex flex-col md:flex-row justify-between items-center gap-6">
            <div class="flex items-center gap-4">
                <div class="bg-slate-900 p-3 rounded-2xl shadow-lg shadow-slate-200 text-white">
                    <i data-lucide="palette"></i>
                </div>
                <div>
                    <h1 class="text-xl font-black tracking-tight text-slate-800 flex flex-col sm:flex-row sm:items-baseline gap-2">
                        Mahmoud Yousry 
                        <span class="text-blue-600 font-medium text-sm sm:text-lg tracking-normal">| Senior Graphic Designer</span>
                    </h1>
                    <p class="text-[10px] text-slate-500 font-bold uppercase tracking-widest mt-1">أكاديمية النخبة الدولية للتدريب والتنمية</p>
                </div>
            </div>

            <div class="flex items-center gap-4">
                <div id="badge-container" class="px-4 py-2 rounded-xl border-2 border-white shadow-sm flex items-center gap-2 bg-slate-500 text-white text-xs font-bold animate-pulse-slow">
                    <i data-lucide="trending-up" class="w-4 h-4"></i>
                    <span id="badge-text">بداية قوية</span>
                </div>
                <div class="h-10 w-[1px] bg-slate-200 mx-2 hidden md:block"></div>
                <div class="text-left">
                    <div class="text-[10px] text-slate-400 font-bold uppercase">KPI Score</div>
                    <div id="score-display" class="text-xl font-black text-blue-600">0%</div>
                </div>
            </div>
        </div>
    </header>

    <main class="max-w-7xl mx-auto p-4 md:p-8">
        
        <!-- Tabs Navigation -->
        <div class="inline-flex p-1 bg-slate-200/50 rounded-2xl mb-8">
            <button onclick="switchTab('input')" id="tab-input" class="tab-btn px-8 py-2.5 rounded-xl text-sm font-bold transition-all tab-active">البيانات</button>
            <button onclick="switchTab('report')" id="tab-report" class="tab-btn px-8 py-2.5 rounded-xl text-sm font-bold transition-all text-slate-500">التقرير</button>
            <button onclick="switchTab('history')" id="tab-history" class="tab-btn px-8 py-2.5 rounded-xl text-sm font-bold transition-all text-slate-500">الأرشيف</button>
        </div>

        <!-- Section: Input -->
        <div id="content-input" class="tab-content grid grid-cols-1 lg:grid-cols-12 gap-8">
            <div class="lg:col-span-8 space-y-6">
                <!-- Period Selector -->
                <div class="bg-white rounded-2xl p-6 border border-slate-200 shadow-sm flex flex-wrap gap-4 items-center">
                    <div class="flex items-center gap-2 text-slate-500 font-bold text-sm">
                        <i data-lucide="calendar" class="w-5 h-5"></i>
                        <span>فترة التقرير:</span>
                    </div>
                    <select id="month" class="bg-slate-50 border-none rounded-lg p-2 font-bold text-blue-900 focus:ring-2 focus:ring-blue-100 outline-none"></select>
                    <select id="year" class="bg-slate-50 border-none rounded-lg p-2 font-bold text-blue-900 focus:ring-2 focus:ring-blue-100 outline-none"></select>
                </div>

                <section class="bg-white rounded-3xl p-8 border border-slate-200 shadow-sm">
                    <div class="flex items-center gap-2 mb-8">
                        <i data-lucide="pie-chart" class="text-blue-600"></i>
                        <h2 class="font-black text-slate-800">حجم الإنتاج الفني</h2>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div class="input-group" data-label="سوشيال ميديا" data-name="socialCount" data-icon="layout"></div>
                        <div class="input-group" data-label="إعلانات ممولة" data-name="adCreativeCount" data-icon="target" data-theme="blue"></div>
                        <div class="input-group" data-label="مطبوعات" data-name="printCount" data-icon="file-text"></div>
                        <div class="input-group" data-label="عروض تقدمية" data-name="presentationCount" data-icon="award"></div>
                        <div class="input-group" data-label="هوية بصرية" data-name="brandingCount" data-icon="star"></div>
                        <div class="input-group" data-label="طلبات عاجلة" data-name="rushJobs" data-icon="zap" data-theme="orange"></div>
                    </div>
                </section>

                <section class="bg-white rounded-3xl p-8 border border-slate-200 shadow-sm">
                    <div class="flex items-center gap-2 mb-6">
                        <i data-lucide="lightbulb" class="text-yellow-500"></i>
                        <h2 class="font-black text-slate-800">الابتكار والتطوير الإبداعي</h2>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="space-y-2">
                            <label class="text-[10px] font-black text-slate-400 uppercase">أبرز حملة تم إنجازها</label>
                            <input type="text" id="bestCampaign" placeholder="مثال: حملة دبلوم الموارد البشرية" class="w-full bg-slate-50 border-2 border-transparent focus:border-blue-100 focus:bg-white p-4 rounded-2xl outline-none transition-all font-bold text-slate-700">
                        </div>
                        <div class="space-y-2">
                            <label class="text-[10px] font-black text-slate-400 uppercase">فكرة إبداعية جديدة</label>
                            <input type="text" id="innovativeIdea" placeholder="تطوير موشن جرافيك أو نظام ألوان جديد" class="w-full bg-slate-50 border-2 border-transparent focus:border-blue-100 focus:bg-white p-4 rounded-2xl outline-none transition-all font-bold text-slate-700">
                        </div>
                    </div>
                </section>
            </div>

            <!-- Side Analytics -->
            <div class="lg:col-span-4 space-y-6">
                <div class="bg-white rounded-3xl p-8 border border-slate-200 shadow-sm">
                    <h3 class="font-black mb-6 flex items-center gap-2"><i data-lucide="clock" class="w-5 h-5"></i> الكفاءة الزمنية والدقة</h3>
                    <div class="space-y-6">
                        <div class="flex gap-4">
                            <div class="flex-1">
                                <label class="text-[10px] font-bold text-slate-400 block mb-2 uppercase">ساعات</label>
                                <input type="number" id="deliveryHours" value="0" class="w-full bg-slate-50 p-3 rounded-xl font-bold outline-none border-2 border-transparent focus:border-blue-200 text-center">
                            </div>
                            <div class="flex-1">
                                <label class="text-[10px] font-bold text-slate-400 block mb-2 uppercase">دقائق</label>
                                <input type="number" id="deliveryMinutes" value="0" class="w-full bg-slate-50 p-3 rounded-xl font-bold outline-none border-2 border-transparent focus:border-blue-200 text-center">
                            </div>
                        </div>
                        <div>
                            <label class="text-[10px] font-bold text-slate-400 block mb-2 uppercase">معدل التعديلات (Revisions)</label>
                            <input type="number" id="avgRevisions" value="0" class="w-full bg-slate-50 p-3 rounded-xl font-bold outline-none border-2 border-transparent focus:border-blue-200">
                        </div>
                    </div>
                </div>
                <div class="bg-gradient-to-br from-slate-800 to-slate-900 rounded-3xl p-8 text-white shadow-xl relative overflow-hidden">
                    <h4 class="font-black text-lg mb-2 relative z-10">نظام تقييم النخبة</h4>
                    <p class="text-slate-300 text-xs leading-relaxed relative z-10 font-medium">هذا النظام يحلل التوازن بين الكم والكيف. حصولك على تقييم عالٍ يعني أنك تساهم مباشرة في الهوية البصرية للأكاديمية.</p>
                </div>
            </div>
        </div>

        <!-- Section: Report -->
        <div id="content-report" class="tab-content hidden max-w-4xl mx-auto">
            <div class="bg-white rounded-[2rem] shadow-2xl border border-slate-200 overflow-hidden">
                <div class="bg-slate-900 p-8 text-white flex justify-between items-center">
                    <div class="flex items-center gap-4">
                        <div class="w-12 h-12 bg-blue-600 rounded-2xl flex items-center justify-center font-black text-xl">M</div>
                        <div>
                            <h3 class="font-black">تقرير الأداء التنفيذي</h3>
                            <p class="text-xs text-slate-400">إعداد: محمود يسري</p>
                        </div>
                    </div>
                    <div class="flex gap-3">
                        <button onclick="saveToArchive()" class="bg-white/10 hover:bg-white/20 p-3 rounded-xl transition-all"><i data-lucide="save"></i></button>
                        <button onclick="copyReport()" class="bg-blue-600 hover:bg-blue-500 p-3 rounded-xl transition-all"><i data-lucide="copy"></i></button>
                    </div>
                </div>
                <div id="report-text" class="p-12 text-slate-700 leading-[2.2] text-lg font-medium whitespace-pre-line border-r-[12px] border-blue-600 bg-slate-50">
                    جاري توليد التقرير...
                </div>
            </div>
        </div>

        <!-- Section: History -->
        <div id="content-history" class="tab-content hidden bg-white rounded-3xl border border-slate-200 p-8 shadow-sm">
            <div class="flex items-center gap-2 mb-8">
                <i data-lucide="archive" class="text-blue-600"></i>
                <h3 class="font-black text-xl text-slate-800">الأرشيف السنوي للإنجازات</h3>
            </div>
            <div id="history-list" class="space-y-4">
                <div class="py-20 text-center text-slate-300 font-bold">لا توجد سجلات محفوظة حالياً.</div>
            </div>
        </div>

    </main>

    <footer class="max-w-7xl mx-auto p-8 text-center text-slate-400 text-xs font-bold uppercase tracking-widest">
        © <span id="footer-year"></span> Mahmoud Yousry Design Portfolio System
    </footer>

    <script>
        // --- DATA & STATE ---
        const state = {
            socialCount: 0, adCreativeCount: 0, printCount: 0, 
            presentationCount: 0, brandingCount: 0, rushJobs: 0,
            deliveryHours: 0, deliveryMinutes: 0, avgRevisions: 0,
            month: '', year: 2024, bestCampaign: '', innovativeIdea: ''
        };

        const months = ["يناير", "فبراير", "مارس", "أبريل", "مايو", "يونيو", "يوليو", "أغسطس", "سبتمبر", "أكتوبر", "نوفمبر", "ديسمبر"];
        let history = JSON.parse(localStorage.getItem('eliteHistory')) || [];

        // --- INIT ---
        window.onload = () => {
            document.getElementById('footer-year').innerText = new Date().getFullYear();
            initSelectors();
            renderInputs();
            updateDashboard();
            lucide.createIcons();
            
            // Listen for changes
            document.querySelectorAll('input, select').forEach(el => {
                el.addEventListener('input', (e) => {
                    state[e.target.id] = e.target.value;
                    updateDashboard();
                });
            });
        };

        function initSelectors() {
            const mSel = document.getElementById('month');
            const ySel = document.getElementById('year');
            const curMonth = months[new Date().getMonth()];
            const curYear = new Date().getFullYear();

            months.forEach(m => {
                const opt = new Option(m, m);
                if(m === curMonth) opt.selected = true;
                mSel.add(opt);
            });
            [2024, 2025, 2026].forEach(y => {
                const opt = new Option(y, y);
                if(y === curYear) opt.selected = true;
                ySel.add(opt);
            });

            state.month = mSel.value;
            state.year = ySel.value;
        }

        function renderInputs() {
            document.querySelectorAll('.input-group').forEach(div => {
                const label = div.dataset.label;
                const name = div.dataset.name;
                const icon = div.dataset.icon;
                const theme = div.dataset.theme || 'slate';
                
                div.innerHTML = `
                    <label class="text-[10px] font-black text-slate-400 mb-2 block uppercase tracking-tighter">${label}</label>
                    <div class="flex items-center gap-3 p-4 bg-slate-50 rounded-2xl border-2 border-transparent transition-all focus-within:bg-white focus-within:border-blue-100 shadow-sm focus-within:shadow-md">
                        <i data-lucide="${icon}" class="w-5 h-5 ${theme === 'orange' ? 'text-orange-400' : 'text-slate-400'}"></i>
                        <input type="number" id="${name}" value="0" min="0" class="bg-transparent w-full outline-none font-black text-slate-700 text-lg">
                    </div>
                `;
            });
        }

        function updateDashboard() {
            const score = calculateScore();
            document.getElementById('score-display').innerText = score + '%';
            updateBadge(score);
            generateReportText();
            renderHistory();
        }

        function calculateScore() {
            let score = 0;
            const totalImpact = (parseInt(state.socialCount || 0) * 1) + 
                               (parseInt(state.printCount || 0) * 3) + 
                               (parseInt(state.brandingCount || 0) * 8) + 
                               (parseInt(state.adCreativeCount || 0) * 4);
            score += Math.min(totalImpact, 45); 
            
            const revPenalty = parseInt(state.avgRevisions || 0) * 8;
            score += Math.max(0, 25 - revPenalty);

            const timeMin = (parseInt(state.deliveryHours || 0) * 60) + parseInt(state.deliveryMinutes || 0);
            if (timeMin > 0) {
                score += timeMin < 180 ? 20 : (timeMin < 1440 ? 15 : 10);
            } else { score += 10; }

            if (state.innovativeIdea) score += 10;
            return Math.min(Math.round(score), 100);
        }

        function updateBadge(score) {
            const badgeCont = document.getElementById('badge-container');
            const badgeText = document.getElementById('badge-text');
            
            if (parseInt(state.rushJobs) > 5) {
                badgeText.innerText = 'منقذ الأزمات';
                badgeCont.className = 'px-4 py-2 rounded-xl border-2 border-white shadow-sm flex items-center gap-2 bg-orange-500 text-white text-xs font-bold animate-pulse-slow';
            } else if (score >= 90) {
                badgeText.innerText = 'خبير النخبة';
                badgeCont.className = 'px-4 py-2 rounded-xl border-2 border-white shadow-sm flex items-center gap-2 bg-yellow-500 text-black text-xs font-bold animate-pulse-slow';
            } else {
                badgeText.innerText = 'مصمم محترف';
                badgeCont.className = 'px-4 py-2 rounded-xl border-2 border-white shadow-sm flex items-center gap-2 bg-blue-600 text-white text-xs font-bold animate-pulse-slow';
            }
        }

        function switchTab(tabId) {
            document.querySelectorAll('.tab-content').forEach(c => c.classList.add('hidden'));
            document.getElementById('content-' + tabId).classList.remove('hidden');
            
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('tab-active', 'text-slate-500'));
            document.getElementById('tab-' + tabId).classList.add('tab-active');
            
            if(tabId !== 'input') updateDashboard();
        }

        function generateReportText() {
            const total = parseInt(state.socialCount || 0) + parseInt(state.printCount || 0) + 
                          parseInt(state.presentationCount || 0) + parseInt(state.brandingCount || 0) + 
                          parseInt(state.adCreativeCount || 0);
            
            const text = `إلى: د. محمد شتات - المدير التنفيذي لأكاديمية النخبة الدولية للتدريب والتنمية

تحية طيبة،،

نرفع لسيادتكم تقرير الكفاءة الإبداعية لشهر ${state.month} ${state.year}.

[1] مؤشرات الإنتاج الفني (الإجمالي: ${total} عمل فني):
- الحملات الممولة: ${state.adCreativeCount} | المطبوعات: ${state.printCount}
- الهوية البصرية: ${state.brandingCount} | التواصل الاجتماعي: ${state.socialCount}
- العروض التقديمية: ${state.presentationCount}

[2] معايير الجودة والسرعة:
- متوسط زمن التنفيذ: ${state.deliveryHours} ساعة و ${state.deliveryMinutes} دقيقة.
- معدل الدقة: ${state.avgRevisions} تعديل.

[3] التطوير الاستراتيجي:
- المبادرة: ${state.innovativeIdea || "تحسين معايير الإخراج الفني."}
- الإنجاز الأبرز: تنفيذ تصميمات "${state.bestCampaign || 'البراند العام'}".

الاحترام والتقدير،،
محمود يسري - قسم الجرافيك ديزاين`;
            
            document.getElementById('report-text').innerText = text;
        }

        function copyReport() {
            const text = document.getElementById('report-text').innerText;
            const el = document.createElement('textarea');
            el.value = text;
            document.body.appendChild(el);
            el.select();
            document.execCommand('copy');
            document.body.removeChild(el);
            alert('تم نسخ التقرير بنجاح!');
        }

        function saveToArchive() {
            const record = { ...state, score: calculateScore(), date: new Date().toLocaleDateString() };
            history.unshift(record);
            localStorage.setItem('eliteHistory', JSON.stringify(history));
            alert('تم الحفظ في الأرشيف!');
            renderHistory();
        }

        function renderHistory() {
            const list = document.getElementById('history-list');
            if (history.length === 0) return;
            
            list.innerHTML = history.map((h, i) => `
                <div class="flex items-center justify-between p-6 bg-slate-50 rounded-2xl border border-slate-100">
                    <div class="flex items-center gap-6">
                        <div class="text-center bg-white p-3 rounded-xl border border-slate-200 min-w-[100px]">
                            <div class="text-[10px] text-slate-400 font-black">${h.year}</div>
                            <div class="text-blue-600 font-black text-lg">${h.month}</div>
                        </div>
                        <div>
                            <div class="font-black text-slate-800 text-lg">تقييم الكفاءة: ${h.score}%</div>
                            <div class="text-xs text-slate-400 font-bold">تاريخ الحفظ: ${h.date}</div>
                        </div>
                    </div>
                    <button onclick="deleteHistory(${i})" class="text-red-300 hover:text-red-500 p-2"><i data-lucide="trash-2"></i></button>
                </div>
            `).join('');
            lucide.createIcons();
        }

        function deleteHistory(i) {
            if(confirm('حذف هذا السجل؟')) {
                history.splice(i, 1);
                localStorage.setItem('eliteHistory', JSON.stringify(history));
                renderHistory();
            }
        }
    </script>
</body>
</html>
